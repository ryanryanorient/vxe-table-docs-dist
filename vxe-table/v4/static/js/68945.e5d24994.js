"use strict";(self["webpackChunkvxe_table_v4"]=self["webpackChunkvxe_table_v4"]||[]).push([[68945],{68945:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var r=n(50124),o=n(48534),a=(n(60228),n(48324),n(34338),n(34284),n(66252)),i=n(3577),u=n(2262),c=n(72896),l="https://api.vxetable.cn/demo",s=(0,a.aZ)({__name:"Demo1",setup:function(t){var e=(0,u.iH)(),n=(0,u.iH)(),s=(0,u.iH)(!1),f=(0,u.iH)([]),h=(0,u.qj)({name:[{required:!0,message:"名称必须填写"}]}),p=(0,u.iH)([{label:"男",value:"1"},{label:"女",value:"0"}]),d=function(t){return"1"===t?"男":"0"===t?"女":""},v=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s.value=!0,t.prev=1,t.next=4,fetch("".concat(l,"/api/pub/all")).then((function(t){return t.json()}));case 4:e=t.sent,f.value=e,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),f.value=[];case 11:s.value=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var e,o,a,i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.value,!e){t.next=9;break}return o={},t.next=5,e.insert(o);case 5:return a=t.sent,i=a.row,t.next=9,e.setEditRow(i);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.value,!e){t.next=4;break}return t.next=4,e.removeCheckboxRow();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var e,o,a,i;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.s7.modal.confirm("您确定要删除选中的数据?");case 2:if(e=t.sent,"confirm"===e){t.next=5;break}return t.abrupt("return");case 5:if(o=n.value,!o){t.next=15;break}return a=o.getCheckboxRecords(),s.value=!0,i={removeRecords:a},t.next=12,fetch("".concat(l,"/api/pub/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 12:return t.next=14,v();case 14:s.value=!1;case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=n.value,!o){t.next=4;break}return t.next=4,o.remove(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(e){var n,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.s7.modal.confirm("您确定要删除该数据?");case 2:if(n=t.sent,"confirm"===n){t.next=5;break}return t.abrupt("return");case 5:return s.value=!0,o={removeRecords:[e]},t.next=9,fetch("".concat(l,"/api/pub/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 9:return t.next=11,v();case 11:s.value=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var e,o,a,i,u,f,h;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=n.value,!e){t.next=25;break}if(o=e.getRecordset(),a=o.insertRecords,i=o.removeRecords,u=o.updateRecords,!(a.length<=0&&i.length<=0&&u.length<=0)){t.next=6;break}return c.s7.modal.message({content:"数据未改动！",status:"warning"}),t.abrupt("return");case 6:return t.next=8,e.validate();case 8:if(f=t.sent,!f){t.next=11;break}return t.abrupt("return");case 11:return s.value=!0,t.prev=12,h={insertRecords:a,removeRecords:i,updateRecords:u},t.next=16,fetch("".concat(l,"/api/pub/save"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});case 16:return t.next=18,v();case 18:c.s7.modal.message({content:"操作成功，新增 ".concat(a.length," 条，更新 ").concat(u.length," 条，删除 ").concat(i.length," 条"),status:"success"}),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](12),c.s7.modal.message({content:"操作失败",status:"error"});case 24:s.value=!1;case 25:case"end":return t.stop()}}),t,null,[[12,21]])})));return function(){return t.apply(this,arguments)}}();return(0,a.Y3)((function(){var t=n.value,r=e.value;t&&r&&t.connect(r)})),v(),function(t,r){var o=(0,a.up)("vxe-button"),u=(0,a.up)("vxe-toolbar"),c=(0,a.up)("vxe-column"),l=(0,a.up)("vxe-input"),v=(0,a.up)("vxe-select"),k=(0,a.up)("vxe-table");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(u,{ref_key:"xToolbar",ref:e,loading:s.value},{buttons:(0,a.w5)((function(){return[(0,a.Wm)(o,{status:"primary",content:"临时新增",onClick:m}),(0,a.Wm)(o,{status:"warning",content:"临时删除",onClick:y}),(0,a.Wm)(o,{status:"danger",content:"直接删除",onClick:w}),(0,a.Wm)(o,{content:"提交（将临时操作持久化）",onClick:b})]})),_:1},8,["loading"]),(0,a.Wm)(k,{border:"","show-overflow":"","keep-source":"",ref_key:"xTable",ref:n,height:"500","column-config":{resizable:!0},loading:s.value,data:f.value,"edit-rules":h,"edit-config":{trigger:"click",mode:"row",showUpdateStatus:!0,showInsertStatus:!0}},{default:(0,a.w5)((function(){return[(0,a.Wm)(c,{type:"checkbox",width:"60"}),(0,a.Wm)(c,{field:"name",title:"Name","edit-render":{}},{edit:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(l,{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,a.Wm)(c,{field:"nickname",title:"Nickname","edit-render":{}},{edit:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(l,{modelValue:e.nickname,"onUpdate:modelValue":function(t){return e.nickname=t},type:"text"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,a.Wm)(c,{field:"sex",title:"Sex","edit-render":{}},{default:(0,a.w5)((function(t){var e=t.row;return[(0,a._)("span",null,(0,i.zw)(d(e.sex)),1)]})),edit:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(v,{modelValue:e.sex,"onUpdate:modelValue":function(t){return e.sex=t},type:"text",options:p.value,transfer:""},null,8,["modelValue","onUpdate:modelValue","options"])]})),_:1}),(0,a.Wm)(c,{field:"amount",title:"Amount","edit-render":{}},{edit:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(l,{modelValue:e.amount,"onUpdate:modelValue":function(t){return e.amount=t},type:"float",digits:2},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,a.Wm)(c,{field:"updateDate",title:"Date","edit-render":{}},{edit:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(l,{modelValue:e.updateDate,"onUpdate:modelValue":function(t){return e.updateDate=t},type:"date"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,a.Wm)(c,{title:"操作",width:"240"},{default:(0,a.w5)((function(t){var e=t.row;return[(0,a.Wm)(o,{status:"warning",content:"临时删除",onClick:function(t){return g(e)}},null,8,["onClick"]),(0,a.Wm)(o,{status:"danger",content:"直接删除",onClick:function(t){return x(e)}},null,8,["onClick"])]})),_:1})]})),_:1},8,["loading","data","edit-rules"])])}}});const f=s;var h=f},7629:function(t,e,n){var r=n(19037),o=n(55997);o(r.JSON,"JSON",!0)},77509:function(t,e,n){var r=n(55997);r(Math,"Math",!0)},88052:function(t,e,n){var r=n(79989),o=n(3689),a=n(90690),i=n(61868),u=n(81748),c=o((function(){i(1)}));r({target:"Object",stat:!0,forced:c,sham:!u},{getPrototypeOf:function(t){return i(a(t))}})},58373:function(t,e,n){var r=n(35405);r("asyncIterator")},66793:function(t,e,n){var r=n(76058),o=n(35405),a=n(55997);o("toStringTag"),a(r("Symbol"),"Symbol")},48534:function(t,e,n){n.d(e,{Z:function(){return o}});n(60228);function r(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function u(t){r(i,o,a,u,c,"next",t)}function c(t){r(i,o,a,u,c,"throw",t)}u(void 0)}))}}},50124:function(t,e,n){n.d(e,{Z:function(){return o}});n(59749),n(86544),n(60228),n(84254),n(21694),n(76265),n(58373),n(66793),n(7629),n(77509),n(88052),n(21057),n(70560),n(47522),n(34284),n(89730);var r=n(3336);function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
o=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),u=new C(r||[]);return i(a,"_invoke",{value:S(t,n,u)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",w={};function g(){}function x(){}function b(){}var k={};f(k,c,(function(){return this}));var _=Object.getPrototypeOf,L=_&&_(_(N([])));L&&L!==n&&a.call(L,c)&&(k=L);var Z=b.prototype=g.prototype=Object.create(k);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,u,c){var l=p(t[o],t,i);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==(0,r.Z)(f)&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):e.resolve(f).then((function(t){s.value=t,u(s)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}})}function S(e,n,r){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var c=V(u,r);if(c){if(c===w)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=p(e,n,r);if("normal"===l.type){if(o=r.done?y:v,l.arg===w)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function V(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator["return"]&&(n.method="return",n.arg=t,V(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),w;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,w;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,w):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,w)}function W(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(W,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError((0,r.Z)(e)+" is not iterable")}return x.prototype=b,i(Z,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:x,configurable:!0}),x.displayName=f(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,s,"GeneratorFunction")),t.prototype=Object.create(Z),t},e.awrap=function(t){return{__await:t}},E(O.prototype),f(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new O(h(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(Z),f(Z,s,"Generator"),f(Z,c,(function(){return this})),f(Z,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),w}},e}}}]);