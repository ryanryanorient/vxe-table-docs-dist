"use strict";(self["webpackChunkvxe_table_v4"]=self["webpackChunkvxe_table_v4"]||[]).push([[40186],{40186:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});t(34284);var l=t(66252),a=t(3577),o=(0,l._)("p",{class:"tip"},[(0,l.Uk)("实现简单的唯一下拉选项列表"),(0,l._)("span",{class:"red"},"（具体请自行实现，该示例仅供参考）")],-1),r={class:"demo-code"};function d(e,n,t,d,i,u){var s=(0,l.up)("vxe-button"),v=(0,l.up)("vxe-toolbar"),m=(0,l.up)("vxe-column"),c=(0,l.up)("vxe-input"),f=(0,l.up)("vxe-option"),b=(0,l.up)("vxe-select"),p=(0,l.up)("vxe-table"),x=(0,l.up)("pre-code");return(0,l.wg)(),(0,l.iD)("div",null,[o,(0,l.Wm)(v,null,{buttons:(0,l.w5)((function(){return[(0,l.Wm)(s,{onClick:n[0]||(n[0]=function(n){return e.insertEvent()})},{default:(0,l.w5)((function(){return[(0,l.Uk)("新增")]})),_:1})]})),_:1}),(0,l.Wm)(p,{border:"","show-overflow":"",ref:"xTable","max-height":"400","column-config":{resizable:!0},data:e.demo1.tableData,"edit-config":{trigger:"click",mode:"row"},onEditActived:e.editActivedEvent},{default:(0,l.w5)((function(){return[(0,l.Wm)(m,{type:"seq",width:"60"}),(0,l.Wm)(m,{field:"name",title:"Name","edit-render":{}},{edit:(0,l.w5)((function(e){var n=e.row;return[(0,l.Wm)(c,{modelValue:n.name,"onUpdate:modelValue":function(e){return n.name=e},type:"text"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(m,{field:"role",title:"Role","edit-render":{}},{default:(0,l.w5)((function(n){var t=n.row;return[(0,l._)("span",null,(0,a.zw)(e.formatRole(t.role)),1)]})),edit:(0,l.w5)((function(n){var t=n.row;return[(0,l.Wm)(b,{modelValue:t.role,"onUpdate:modelValue":function(e){return t.role=e},clearable:"",transfer:"",onChange:e.roleChangeEvent},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.demo1.roleList,(function(e){return(0,l.wg)(),(0,l.j4)(f,{key:e.value,value:e.value,label:e.label,disabled:e.disabled},null,8,["value","label","disabled"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),(0,l.Wm)(m,{field:"date13",title:"Date","edit-render":{}},{edit:(0,l.w5)((function(e){var n=e.row;return[(0,l.Wm)(c,{modelValue:n.date13,"onUpdate:modelValue":function(e){return n.date13=e},type:"date",transfer:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["data","onEditActived"]),(0,l._)("p",r,(0,a.zw)(e.$t("app.body.button.showCode")),1),(0,l._)("pre",null,[(0,l.Uk)("      "),(0,l.Wm)(x,{class:"xml"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,a.zw)(e.demoCodes[0]),1)]})),_:1}),(0,l.Uk)("\n      "),(0,l.Wm)(x,{class:"typescript"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,a.zw)(e.demoCodes[1]),1)]})),_:1}),(0,l.Uk)("\n    ")])])}t(25728),t(60228),t(47522);var i=t(2262),u=(0,l.aZ)({setup:function(){var e=(0,i.iH)(),n=(0,i.qj)({tableData:[{id:10001,name:"Test1",nickname:"T1",role:"1",age:28,address:"Shenzhen",date12:"",date13:""},{id:10002,name:"Test2",nickname:"T2",role:"2",age:22,address:"Guangzhou",date12:"",date13:"2020-08-20"}],roleList:[{label:"前端",value:"1",disabled:!1},{label:"后端",value:"2",disabled:!1},{label:"项目经理",value:"3",disabled:!1},{label:"设计师",value:"4",disabled:!1},{label:"运维",value:"5",disabled:!1}]}),t=function(e){var t=n.roleList.find((function(n){return n.value===e}));return t?t.label:e},a=function(){var n=e.value;if(n){var t={};n.insert(t)}},o=function(){var t=e.value;if(t){var l=t.getTableData(),a=l.fullData;n.roleList.forEach((function(e){e.value&&(e.disabled=a.some((function(n){return n.role===e.value})))}))}},r=function(){o()},d=function(){o()};return(0,l.Y3)((function(){o()})),{xTable:e,demo1:n,formatRole:t,insertEvent:a,roleChangeEvent:r,editActivedEvent:d,demoCodes:['\n        <vxe-toolbar>\n          <template #buttons>\n            <vxe-button @click="insertEvent()">新增</vxe-button>\n          </template>\n        </vxe-toolbar>\n\n        <vxe-table\n          border\n          show-overflow\n          ref="xTable"\n          max-height="400"\n          :column-config="{resizable: true}"\n          :data="demo1.tableData"\n          :edit-config="{trigger: \'click\', mode: \'row\'}"\n          @edit-actived="editActivedEvent">\n          <vxe-column type="seq" width="60"></vxe-column>\n          <vxe-column field="name" title="Name" :edit-render="{}">\n            <template #edit="{ row }">\n              <vxe-input v-model="row.name" type="text"></vxe-input>\n            </template>\n          </vxe-column>\n          <vxe-column field="role" title="Role" :edit-render="{}">\n            <template #default="{ row }">\n              <span>{{ formatRole(row.role) }}</span>\n            </template>\n            <template #edit="{ row }">\n              <vxe-select v-model="row.role" clearable transfer @change="roleChangeEvent">\n                <vxe-option v-for="item in demo1.roleList" :key="item.value" :value="item.value" :label="item.label" :disabled="item.disabled"></vxe-option>\n              </vxe-select>\n            </template>\n          </vxe-column>\n          <vxe-column field="date13" title="Date" :edit-render="{}">\n            <template #edit="{ row }">\n              <vxe-input v-model="row.date13" type="date" transfer></vxe-input>\n            </template>\n          </vxe-column>\n        </vxe-table>\n        ',"\n        import { defineComponent, nextTick, reactive, ref } from 'vue'\n        import { VxeTableInstance } from 'vxe-table'\n\n        export default defineComponent({\n          setup () {\n            const xTable = ref<VxeTableInstance>()\n\n            const demo1 = reactive({\n              tableData: [\n                { id: 10001, name: 'Test1', nickname: 'T1', role: '1', age: 28, address: 'Shenzhen', date12: '', date13: '' },\n                { id: 10002, name: 'Test2', nickname: 'T2', role: '2', age: 22, address: 'Guangzhou', date12: '', date13: '2020-08-20' }\n              ],\n              roleList: [\n                { label: '前端', value: '1', disabled: false },\n                { label: '后端', value: '2', disabled: false },\n                { label: '项目经理', value: '3', disabled: false },\n                { label: '设计师', value: '4', disabled: false },\n                { label: '运维', value: '5', disabled: false }\n              ]\n            })\n\n            const formatRole = (value: any) => {\n              const item = demo1.roleList.find(item => item.value === value)\n              return item ? item.label : value\n            }\n\n            const insertEvent = () => {\n              const $table = xTable.value\n              const record = {}\n              $table.insert(record)\n            }\n\n            const updateRoleList = () => {\n              const $table = xTable.value\n              // 获取表格中的全量数据\n              const { fullData } = $table.getTableData()\n              demo1.roleList.forEach(item => {\n                if (item.value) {\n                  // 如果当前选项已经被选过，则禁用\n                  item.disabled = fullData.some(row => row.role === item.value)\n                }\n              })\n            }\n\n            const roleChangeEvent = () => {\n              updateRoleList()\n            }\n\n            const editActivedEvent = () => {\n              // 激活编辑时检查剩余选项是否可选择\n              updateRoleList()\n            }\n\n            nextTick(() => {\n              updateRoleList()\n            })\n\n            return {\n              xTable,\n              demo1,\n              formatRole,\n              insertEvent,\n              roleChangeEvent,\n              editActivedEvent\n            }\n          }\n        })\n        "]}}}),s=t(83744);const v=(0,s.Z)(u,[["render",d]]);var m=v}}]);