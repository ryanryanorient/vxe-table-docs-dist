"use strict";(self["webpackChunkvxe_table_v4"]=self["webpackChunkvxe_table_v4"]||[]).push([[50939],{50939:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(66252),i=t(3577),c={class:"tip"},d=(0,a._)("br",null,null,-1),r={class:"red"},o={class:"demo-code"};function l(e,n,t,l,m,h){var u=(0,a.up)("table-api-link"),f=(0,a.up)("vxe-checkbox"),p=(0,a.up)("vxe-column"),s=(0,a.up)("vxe-table"),k=(0,a.up)("pre-code");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("p",c,[(0,a.Uk)("实现横向树列表"),d,(0,a._)("span",r,[(0,a.Uk)("（注："),(0,a.Wm)(u,{prop:"span-method"}),(0,a.Uk)(" ，不能用于树形结构、展开行、固定列，合并的逻辑都是自行实现的，该示例仅供参考）")])]),(0,a.Wm)(s,{border:"",height:"600","scroll-y":{enabled:!1},"span-method":e.rowspanMethod,data:e.demo1.tableData},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{field:"name1",title:"功能模块"},{default:(0,a.w5)((function(n){var t=n.row;return[(0,a.Wm)(f,{modelValue:t.check1,"onUpdate:modelValue":function(e){return t.check1=e},onChange:function(n){return e.check1ChangeEvent(t,t.check1)}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name1),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),(0,a.Wm)(p,{field:"name2",title:"详细功能"},{default:(0,a.w5)((function(n){var t=n.row;return[(0,a.Wm)(f,{modelValue:t.check2,"onUpdate:modelValue":function(e){return t.check2=e},onChange:function(n){return e.check2ChangeEvent(t,t.check2)}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name2),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),(0,a.Wm)(p,{field:"name3",title:"权限类型"},{default:(0,a.w5)((function(n){var t=n.row;return[(0,a.Wm)(f,{modelValue:t.check3,"onUpdate:modelValue":function(e){return t.check3=e},onChange:function(n){return e.check3ChangeEvent(t,t.check3)}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name3),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),(0,a.Wm)(p,{field:"name4",title:"权限列表"},{default:(0,a.w5)((function(n){var t=n.row;return[(0,a.Wm)(f,{modelValue:t.check4,"onUpdate:modelValue":function(e){return t.check4=e},onChange:function(n){return e.check4ChangeEvent(t,t.check4)}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(t.name4),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1})]})),_:1},8,["span-method","data"]),(0,a._)("p",o,(0,i.zw)(e.$t("app.body.button.showCode")),1),(0,a._)("pre",null,[(0,a.Uk)("      "),(0,a.Wm)(k,{class:"xml"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.demoCodes[0]),1)]})),_:1}),(0,a.Uk)("\n      "),(0,a.Wm)(k,{class:"typescript"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,i.zw)(e.demoCodes[1]),1)]})),_:1}),(0,a.Uk)("\n    ")])])}t(38077),t(60228),t(47522),t(76265),t(34338),t(34284),t(70560),t(76801);var m=t(2262),h=t(38478),u=t.n(h),f=(0,a.aZ)({setup:function(){var e=(0,m.qj)({tableData:[]}),n=function(n,t){var a=e.tableData.filter((function(e){return e.id3===n.id3&&e.name4===n.name4}));a.forEach((function(e){e.check4=t})),a=e.tableData.filter((function(e){return e.id3===n.id3}));var i=a.every((function(e){return e.check4}));a.forEach((function(e){e.check3=i})),a=e.tableData.filter((function(e){return e.id2===n.id2}));var c=a.every((function(e){return e.check3}));a.forEach((function(e){e.check2=c})),a=e.tableData.filter((function(e){return e.id1===n.id1}));var d=a.every((function(e){return e.check2}));a.forEach((function(e){e.check1=d}))},t=function(t,a){var i=e.tableData.filter((function(e){return e.id2===t.id2&&e.name3===t.name3}));i.forEach((function(e){e.check3=a})),i=e.tableData.filter((function(e){return e.id3===t.id3})),i.forEach((function(e){n(e,a)}))},a=function(n,a){var i=e.tableData.filter((function(e){return e.id1===n.id1&&e.name2===n.name2}));i.forEach((function(e){e.check2=a})),i=e.tableData.filter((function(e){return e.id2===n.id2})),i.forEach((function(e){t(e,a)}))},i=function(n,t){var i=e.tableData.filter((function(e){return e.name1===n.name1}));i.forEach((function(e){e.check1=t})),i=e.tableData.filter((function(e){return e.id1===n.id1})),i.forEach((function(e){a(e,t)}))},c=function(){var e=[{id:"10000",parentId:null,name:"账号管理"},{id:"11000",parentId:"10000",name:"用户管理"},{id:"11100",parentId:"11000",name:"查看"},{id:"11110",parentId:"11100",name:"用户列表"},{id:"11200",parentId:"11000",name:"编辑"},{id:"11210",parentId:"11200",name:"用户列表"},{id:"11220",parentId:"11200",name:"新增用户"},{id:"11300",parentId:"11000",name:"操作"},{id:"11310",parentId:"11300",name:"新增"},{id:"11320",parentId:"11300",name:"删除"},{id:"11330",parentId:"11300",name:"修改"},{id:"12000",parentId:"10000",name:"角色管理"},{id:"12100",parentId:"12000",name:"查看"},{id:"12110",parentId:"12100",name:"角色列表"},{id:"12200",parentId:"12000",name:"编辑"},{id:"122100",parentId:"12200",name:"角色列表"},{id:"12220",parentId:"12200",name:"新增角色"},{id:"12300",parentId:"12000",name:"操作"},{id:"12310",parentId:"12300",name:"新增"},{id:"12320",parentId:"12300",name:"删除"},{id:"12330",parentId:"12300",name:"修改"},{id:"20000",parentId:null,name:"个人中心"},{id:"21000",parentId:"20000",name:"个性化设置"},{id:"21100",parentId:"21000",name:"查看"},{id:"21110",parentId:"21100",name:"信息列表"},{id:"21200",parentId:"21000",name:"操作"},{id:"21210",parentId:"21200",name:"重置信息"},{id:"22000",parentId:"20000",name:"账户管理"},{id:"22100",parentId:"22000",name:"查看"},{id:"22110",parentId:"22100",name:"账户余额"},{id:"22120",parentId:"22100",name:"帐变记录"}];return e},d=function(n){var t={children:"children"},a=[],i={};u().eachTree(n,(function(e,n,t,c,d){if(i[e.id]=e,e.keys=d?d.keys.concat([e.id]):[e.id],!e.children||!e.children.length){var r={};e.keys.forEach((function(e,n){var t=n+1,a=i[e];r["check".concat(t)]=!1,r["id".concat(t)]=a.id,r["name".concat(t)]=a.name})),a.push(r)}}),t),e.tableData=a},r=function(e){var n=e.row,t=e._rowIndex,a=e.column,i=e.visibleData,c=["name1","name2","name3"],d=n[a.field];if(d&&c.includes(a.field)){var r=i[t-1],o=i[t+1];if(r&&r[a.field]===d)return{rowspan:0,colspan:0};var l=1;while(o&&o[a.field]===d)o=i[++l+t];if(l>1)return{rowspan:l,colspan:1}}},o=u().toArrayTree(c());return d(o),{demo1:e,check1ChangeEvent:i,check2ChangeEvent:a,check3ChangeEvent:t,check4ChangeEvent:n,rowspanMethod:r,demoCodes:['\n        <vxe-table\n          border\n          height="600"\n          :scroll-y="{enabled: false}"\n          :span-method="rowspanMethod"\n          :data="demo1.tableData">\n          <vxe-column field="name1" title="功能模块">\n            <template #default="{ row }">\n              <vxe-checkbox v-model="row.check1" @change="check1ChangeEvent(row, row.check1)">{{ row.name1 }}</vxe-checkbox>\n            </template>\n          </vxe-column>\n          <vxe-column field="name2" title="详细功能">\n            <template #default="{ row }">\n              <vxe-checkbox v-model="row.check2" @change="check2ChangeEvent(row, row.check2)">{{ row.name2 }}</vxe-checkbox>\n            </template>\n          </vxe-column>\n          <vxe-column field="name3" title="权限类型">\n            <template #default="{ row }">\n              <vxe-checkbox v-model="row.check3" @change="check3ChangeEvent(row, row.check3)">{{ row.name3 }}</vxe-checkbox>\n            </template>\n          </vxe-column>\n          <vxe-column field="name4" title="权限列表">\n            <template #default="{ row }">\n              <vxe-checkbox v-model="row.check4" @change="check4ChangeEvent(row, row.check4)">{{ row.name4 }}</vxe-checkbox>\n            </template>\n          </vxe-column>\n        </vxe-table>\n        ',"\n        import { defineComponent, reactive } from 'vue'\n        import { VxeTablePropTypes } from 'vxe-table'\n        import XEUtils from 'xe-utils'\n\n        export default defineComponent({\n          setup () {\n            const demo1 = reactive({\n              tableData: [] as any[]\n            })\n\n            const check4ChangeEvent = (row: any, checked: boolean) => {\n              let childList = demo1.tableData.filter(item => item.id3 === row.id3 && item.name4 === row.name4)\n              childList.forEach(item => {\n                item.check4 = checked\n              })\n              childList = demo1.tableData.filter(item => item.id3 === row.id3)\n              const isChecked3 = childList.every(item => item.check4)\n              childList.forEach(item => {\n                item.check3 = isChecked3\n              })\n              childList = demo1.tableData.filter(item => item.id2 === row.id2)\n              const isChecked2 = childList.every(item => item.check3)\n              childList.forEach(item => {\n                item.check2 = isChecked2\n              })\n              childList = demo1.tableData.filter(item => item.id1 === row.id1)\n              const isChecked1 = childList.every(item => item.check2)\n              childList.forEach(item => {\n                item.check1 = isChecked1\n              })\n            }\n\n            const check3ChangeEvent = (row: any, checked: boolean) => {\n              let childList = demo1.tableData.filter(item => item.id2 === row.id2 && item.name3 === row.name3)\n              childList.forEach(item => {\n                item.check3 = checked\n              })\n              childList = demo1.tableData.filter(item => item.id3 === row.id3)\n              childList.forEach(item => {\n                check4ChangeEvent(item, checked)\n              })\n            }\n\n            const check2ChangeEvent = (row: any, checked: boolean) => {\n              let childList = demo1.tableData.filter(item => item.id1 === row.id1 && item.name2 === row.name2)\n              childList.forEach(item => {\n                item.check2 = checked\n              })\n              childList = demo1.tableData.filter(item => item.id2 === row.id2)\n              childList.forEach(item => {\n                check3ChangeEvent(item, checked)\n              })\n            }\n\n            const check1ChangeEvent = (row: any, checked: boolean) => {\n              let childList = demo1.tableData.filter(item => item.name1 === row.name1)\n              childList.forEach(item => {\n                item.check1 = checked\n              })\n              childList = demo1.tableData.filter(item => item.id1 === row.id1)\n              childList.forEach(item => {\n                check2ChangeEvent(item, checked)\n              })\n            }\n\n            const getList = () => {\n              const list = [\n                { id: '10000', parentId: null, name: '账号管理' },\n                { id: '11000', parentId: '10000', name: '用户管理' },\n                { id: '11100', parentId: '11000', name: '查看' },\n                { id: '11110', parentId: '11100', name: '用户列表' },\n                { id: '11200', parentId: '11000', name: '编辑' },\n                { id: '11210', parentId: '11200', name: '用户列表' },\n                { id: '11220', parentId: '11200', name: '新增用户' },\n                { id: '11300', parentId: '11000', name: '操作' },\n                { id: '11310', parentId: '11300', name: '新增' },\n                { id: '11320', parentId: '11300', name: '删除' },\n                { id: '11330', parentId: '11300', name: '修改' },\n                { id: '12000', parentId: '10000', name: '角色管理' },\n                { id: '12100', parentId: '12000', name: '查看' },\n                { id: '12110', parentId: '12100', name: '角色列表' },\n                { id: '12200', parentId: '12000', name: '编辑' },\n                { id: '122100', parentId: '12200', name: '角色列表' },\n                { id: '12220', parentId: '12200', name: '新增角色' },\n                { id: '12300', parentId: '12000', name: '操作' },\n                { id: '12310', parentId: '12300', name: '新增' },\n                { id: '12320', parentId: '12300', name: '删除' },\n                { id: '12330', parentId: '12300', name: '修改' },\n                { id: '20000', parentId: null, name: '个人中心' },\n                { id: '21000', parentId: '20000', name: '个性化设置' },\n                { id: '21100', parentId: '21000', name: '查看' },\n                { id: '21110', parentId: '21100', name: '信息列表' },\n                { id: '21200', parentId: '21000', name: '操作' },\n                { id: '21210', parentId: '21200', name: '重置信息' },\n                { id: '22000', parentId: '20000', name: '账户管理' },\n                { id: '22100', parentId: '22000', name: '查看' },\n                { id: '22110', parentId: '22100', name: '账户余额' },\n                { id: '22120', parentId: '22100', name: '帐变记录' }\n              ]\n              return list\n            }\n\n            // 将普通树结构转换为横向树列表\n            const toColTreeData = (treeData: any[]) => {\n              const options = { children: 'children' }\n              const list: any[] = []\n              const keyMap: any = {}\n              XEUtils.eachTree(treeData, (item, index, result, paths, parent) => {\n                keyMap[item.id] = item\n                item.keys = parent ? parent.keys.concat([item.id]) : [item.id]\n                if (!item.children || !item.children.length) {\n                  const row: any = {}\n                  item.keys.forEach((key: any, index: number) => {\n                    const level = index + 1\n                    const obj = keyMap[key]\n                    row[`check${level}`] = false\n                    row[`id${level}`] = obj.id\n                    row[`name${level}`] = obj.name\n                  })\n                  list.push(row)\n                }\n              }, options)\n              demo1.tableData = list\n            }\n\n            // 通用行合并函数（将相同多列数据合并为一行）\n            const rowspanMethod: VxeTablePropTypes.SpanMethod = ({ row, _rowIndex, column, visibleData }) => {\n              const fields = ['name1', 'name2', 'name3']\n              const cellValue = row[column.field]\n              if (cellValue && fields.includes(column.field)) {\n                const prevRow = visibleData[_rowIndex - 1]\n                let nextRow = visibleData[_rowIndex + 1]\n                if (prevRow && prevRow[column.field] === cellValue) {\n                  return { rowspan: 0, colspan: 0 }\n                } else {\n                  let countRowspan = 1\n                  while (nextRow && nextRow[column.field] === cellValue) {\n                    nextRow = visibleData[++countRowspan + _rowIndex]\n                  }\n                  if (countRowspan > 1) {\n                    return { rowspan: countRowspan, colspan: 1 }\n                  }\n                }\n              }\n            }\n\n            const treeData = XEUtils.toArrayTree(getList())\n            toColTreeData(treeData)\n\n            return {\n              demo1,\n              check1ChangeEvent,\n              check2ChangeEvent,\n              check3ChangeEvent,\n              check4ChangeEvent,\n              rowspanMethod\n            }\n          }\n        })\n        "]}}}),p=t(83744);const s=(0,p.Z)(f,[["render",l]]);var k=s}}]);