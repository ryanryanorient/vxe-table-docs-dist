"use strict";(self["webpackChunkvxe_table_v4"]=self["webpackChunkvxe_table_v4"]||[]).push([[93455],{93455:function(e,n,l){l.r(n),l.d(n,{default:function(){return f}});var t=l(66252),o=l(3577),i={class:"tip"},a={class:"demo-code"};function s(e,n,l,s,d,r){var c=(0,t.up)("table-api-link"),u=(0,t.up)("vxe-column"),m=(0,t.up)("vxe-table"),b=(0,t.up)("pre-code");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("p",i,[(0,t.Uk)("右键菜单，支持表头菜单、内容菜单、表尾菜单，通过 "),(0,t.Wm)(c,{prop:"visibleMethod"}),(0,t.Uk)(" 和 "),(0,t.Wm)(c,{prop:"visible"}),(0,t.Uk)(" | "),(0,t.Wm)(c,{prop:"disabled"}),(0,t.Uk)(" 属性来控制菜单选项的操作权限")]),(0,t.Wm)(m,{border:"","show-footer":"",ref:"xTable",height:"400","row-config":{isCurrent:!0},"column-config":{isCurrent:!0},"footer-method":e.footerMethod,data:e.demo1.tableData,"menu-config":e.demo1.tableMenu,onHeaderCellMenu:e.headerCellContextMenuEvent,onCellMenu:e.cellContextMenuEvent,onMenuClick:e.contextMenuClickEvent},{default:(0,t.w5)((function(){return[(0,t.Wm)(u,{type:"seq",width:"60"}),(0,t.Wm)(u,{field:"name",title:"Name",sortable:""}),(0,t.Wm)(u,{field:"sex",title:"Sex"}),(0,t.Wm)(u,{field:"age",title:"Age"}),(0,t.Wm)(u,{field:"time",title:"Time"})]})),_:1},8,["footer-method","data","menu-config","onHeaderCellMenu","onCellMenu","onMenuClick"]),(0,t._)("pre",null,[(0,t.Uk)("      "),(0,t.Wm)(b,null,{default:(0,t.w5)((function(){return[(0,t.Uk)("\n        | Arrow Up ↑ | 移动到上一个菜单选项 |\n        | Arrow Down ↓ | 移动到下一个菜单选项 |\n        | Arrow Left ← | 关闭二级菜单 |\n        | Arrow Right → | 打开二级菜单 |\n        | Esc | 关闭菜单选项 |\n        | Enter | 选中当前菜单选项 |\n        | Spacebar | 选中当前菜单选项 |\n      ")]})),_:1}),(0,t.Uk)("\n    ")]),(0,t._)("p",a,(0,o.zw)(e.$t("app.body.button.showCode")),1),(0,t._)("pre",null,[(0,t.Uk)("      "),(0,t.Wm)(b,{class:"xml"},{default:(0,t.w5)((function(){return[(0,t.Uk)((0,o.zw)(e.demoCodes[0]),1)]})),_:1}),(0,t.Uk)("\n      "),(0,t.Wm)(b,{class:"typescript"},{default:(0,t.w5)((function(){return[(0,t.Uk)((0,o.zw)(e.demoCodes[1]),1)]})),_:1}),(0,t.Uk)("\n    ")])])}l(60228),l(47522),l(34284),l(79288),l(50886),l(76801);var d=l(2262),r=l(72896),c=l(1026),u=(0,t.aZ)({setup:function(){var e=(0,d.iH)(),n=(0,d.qj)({tableData:[{id:10001,name:"Test1",role:"Develop",sex:"Man",age:28,address:"test abc"},{id:10002,name:"Test2",role:"Test",sex:"Women",age:22,address:"Guangzhou"},{id:10003,name:"Test3",role:"PM",sex:"Man",age:32,address:"Shanghai"},{id:10004,name:"Test4",role:"Designer",sex:"Women",age:36,address:"Guangzhou"}],tableMenu:{header:{options:[[{code:"exportAll",name:"导出所有.csv",visible:!0,disabled:!1}]]},body:{options:[[{code:"details",name:"查看详情",prefixIcon:"vxe-icon-question-circle-fill",visible:!0,disabled:!1}],[{code:"copy",name:"app.body.label.copy",prefixIcon:"vxe-icon-question-circle-fill",visible:!0,disabled:!1},{code:"clear",name:"清除内容",prefixIcon:"vxe-icon-question-circle-fill",visible:!0,disabled:!1}],[{code:"remove",name:"删除",visible:!0,disabled:!1},{code:"filter",name:"app.body.label.filter",visible:!0,disabled:!1,children:[{code:"clearFilter",name:"清除筛选",visible:!0,disabled:!1},{code:"filterSelect",name:"按所选单元格的值筛选",visible:!0,disabled:!1}]},{code:"sort",name:"app.body.label.sort",visible:!0,disabled:!1,children:[{code:"clearSort",name:"清除排序",visible:!0,disabled:!1},{code:"sortAsc",name:"升序",visible:!0,disabled:!1},{code:"sortDesc",name:"倒序",visible:!0,disabled:!1}]},{code:"print",name:"打印",disabled:!0}]]},footer:{options:[[{code:"clearAll",name:"清空数据",visible:!0,disabled:!1}]]},visibleMethod:function(e){var n=e.options,l=e.column,t=!l||"name"!==l.field,o=l&&"age"===l.field;return n.forEach((function(e){e.forEach((function(e){e.disabled=!1,l?("copy"!==e.code&&"remove"!==e.code||(e.disabled=t),"details"===e.code?e.visible="name"===l.field:"clear"!==e.code&&"filter"!==e.code||(e.visible=o)):e.disabled=!0,e.children&&e.children.forEach((function(n){n.disabled=e.disabled}))}))})),!0}}}),l=function(n){var l=n.column,t=e.value;t&&t.setCurrentColumn(l)},t=function(n){var l=n.row,t=e.value;t&&t.setCurrentRow(l)},o=function(e){var n=e.menu,l=e.row,t=e.column;switch(n.code){case"copy":l&&t&&c.Z.copy(l[t.field])&&r.s7.modal.message({content:"已复制到剪贴板！",status:"success"});break;default:r.s7.modal.message({content:'点击了 "'.concat(n.name,'"'),status:"info"})}},i=function(e,n){var l=0;return e.forEach((function(e){l+=Number(e[n])})),l/e.length},a=function(e){var n=e.columns,l=e.data;return[n.map((function(e,n){return 0===n?"平均":["age","rate"].includes(e.field)?i(l,e.field):"-"}))]};return{xTable:e,demo1:n,headerCellContextMenuEvent:l,cellContextMenuEvent:t,contextMenuClickEvent:o,footerMethod:a,demoCodes:['\n        <vxe-table\n          border\n          show-footer\n          ref="xTable"\n          height="400"\n          :row-config="{isCurrent: true}"\n          :column-config="{isCurrent: true}"\n          :footer-method="footerMethod"\n          :data="demo1.tableData"\n          :menu-config="demo1.tableMenu"\n          @header-cell-menu="headerCellContextMenuEvent"\n          @cell-menu="cellContextMenuEvent"\n          @menu-click="contextMenuClickEvent">\n          <vxe-column type="seq" width="60"></vxe-column>\n          <vxe-column field="name" title="Name" sortable></vxe-column>\n          <vxe-column field="sex" title="Sex"></vxe-column>\n          <vxe-column field="age" title="Age"></vxe-column>\n          <vxe-column field="time" title="Time"></vxe-column>\n        </vxe-table>\n        ',"\n        import { defineComponent, reactive, ref } from 'vue'\n        import { VXETable, VxeTableInstance, VxeTableEvents, VxeTablePropTypes } from 'vxe-table'\n        import XEClipboard from 'xe-clipboard'\n\n        export default defineComponent({\n          setup () {\n            const xTable = ref<VxeTableInstance>()\n\n            const demo1 = reactive({\n              tableData: [\n                { id: 10001, name: 'Test1', role: 'Develop', sex: 'Man', age: 28, address: 'test abc' },\n                { id: 10002, name: 'Test2', role: 'Test', sex: 'Women', age: 22, address: 'Guangzhou' },\n                { id: 10003, name: 'Test3', role: 'PM', sex: 'Man', age: 32, address: 'Shanghai' },\n                { id: 10004, name: 'Test4', role: 'Designer', sex: 'Women', age: 36, address: 'Guangzhou' }\n              ],\n              tableMenu: {\n                header: {\n                  options: [\n                    [\n                      { code: 'exportAll', name: '导出所有.csv', visible: true, disabled: false }\n                    ]\n                  ]\n                },\n                body: {\n                  options: [\n                    [\n                      { code: 'details', name: '查看详情', prefixIcon: 'vxe-icon-question-circle-fill', visible: true, disabled: false }\n                    ],\n                    [\n                      { code: 'copy', name: 'app.body.label.copy', prefixIcon: 'vxe-icon-question-circle-fill', visible: true, disabled: false },\n                      { code: 'clear', name: '清除内容', prefixIcon: 'vxe-icon-question-circle-fill', visible: true, disabled: false }\n                    ],\n                    [\n                      { code: 'remove', name: '删除', visible: true, disabled: false },\n                      {\n                        code: 'filter',\n                        name: 'app.body.label.filter',\n                        visible: true,\n                        disabled: false,\n                        children: [\n                          { code: 'clearFilter', name: '清除筛选', visible: true, disabled: false },\n                          { code: 'filterSelect', name: '按所选单元格的值筛选', visible: true, disabled: false }\n                        ]\n                      },\n                      {\n                        code: 'sort',\n                        name: 'app.body.label.sort',\n                        visible: true,\n                        disabled: false,\n                        children: [\n                          { code: 'clearSort', name: '清除排序', visible: true, disabled: false },\n                          { code: 'sortAsc', name: '升序', visible: true, disabled: false },\n                          { code: 'sortDesc', name: '倒序', visible: true, disabled: false }\n                        ]\n                      },\n                      { code: 'print', name: '打印', disabled: true }\n                    ]\n                  ]\n                },\n                footer: {\n                  options: [\n                    [\n                      { code: 'clearAll', name: '清空数据', visible: true, disabled: false }\n                    ]\n                  ]\n                },\n                visibleMethod ({ options, column }) {\n                  // 示例：只有 name 列允许操作，清除按钮只能在 age 才显示\n                  // 显示之前处理按钮的操作权限\n                  const isDisabled = !column || column.field !== 'name'\n                  const isVisible = column && column.field === 'age'\n                  options.forEach(list => {\n                    list.forEach(item => {\n                      item.disabled = false\n                      if (column) {\n                        if (item.code === 'copy' || item.code === 'remove') {\n                          item.disabled = isDisabled\n                        }\n                        if (item.code === 'details') {\n                          item.visible = column.field === 'name'\n                        } else if (item.code === 'clear' || item.code === 'filter') {\n                          item.visible = isVisible\n                        }\n                      } else {\n                        item.disabled = true\n                      }\n                      if (item.children) {\n                        item.children.forEach(childItem => {\n                          childItem.disabled = item.disabled\n                        })\n                      }\n                    })\n                  })\n                  return true\n                }\n              } as VxeTablePropTypes.MenuConfig\n            })\n\n            const headerCellContextMenuEvent: VxeTableEvents.HeaderCellMenu = ({ column }) => {\n              const $table = xTable.value\n              $table.setCurrentColumn(column)\n            }\n\n            const cellContextMenuEvent: VxeTableEvents.CellMenu = ({ row }) => {\n              const $table = xTable.value\n              $table.setCurrentRow(row)\n            }\n\n            const contextMenuClickEvent: VxeTableEvents.MenuClick = ({ menu, row, column }) => {\n              switch (menu.code) {\n                case 'copy':\n                  if (row && column) {\n                    if (XEClipboard.copy(row[column.field])) {\n                      VXETable.modal.message({ content: '已复制到剪贴板！', status: 'success' })\n                    }\n                  }\n                  break\n                default:\n                  VXETable.modal.message({ content: `点击了 \"${menu.name}\"`, status: 'info' })\n              }\n            }\n\n            const meanNum = (list: any[], field: string) => {\n              let count = 0\n              list.forEach(item => {\n                count += Number(item[field])\n              })\n              return count / list.length\n            }\n\n            const footerMethod: VxeTablePropTypes.FooterMethod = ({ columns, data }) => {\n              return [\n                columns.map((column, columnIndex) => {\n                  if (columnIndex === 0) {\n                    return '平均'\n                  }\n                  if (['age', 'rate'].includes(column.field)) {\n                    return meanNum(data, column.field)\n                  }\n                  return '-'\n                })\n              ]\n            }\n\n            return {\n              xTable,\n              demo1,\n              headerCellContextMenuEvent,\n              cellContextMenuEvent,\n              contextMenuClickEvent,\n              footerMethod\n            }\n          }\n        })\n        "]}}}),m=l(83744);const b=(0,m.Z)(u,[["render",s]]);var f=b}}]);