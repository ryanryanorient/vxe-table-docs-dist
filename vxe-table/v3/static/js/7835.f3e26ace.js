"use strict";(self["webpackChunkvxe_table_v3"]=self["webpackChunkvxe_table_v3"]||[]).push([[7835],{87835:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});n(50886),n(38077),n(60228);var a=function(){var e=this,t=e._self._c;return t("div",[t("p",{staticClass:"tip"},[e._v(" 筛选高级用法、动态更改筛选条件、自定义更加复杂的模板事件，通过调用 "),t("table-api-link",{attrs:{prop:"setFilter"}}),e._v(" 和 "),t("table-api-link",{attrs:{prop:"updateData"}}),e._v(" 方法来处理复杂场景的筛选逻辑"),t("span",{staticClass:"red"},[e._v("（具体请自行实现，该示例仅供参考）")]),t("br"),e._v(" 当自定义筛选时，在值发生改变时需要调用 $panel.changeOption(event, checked, option) 更新状态"),t("br"),e._v(" 高级用法："),t("router-link",{staticClass:"link",attrs:{to:{name:"RendererFilter"}}},[e._v("查看渲染器的使用")]),t("br")],1),t("vxe-toolbar",{scopedSlots:e._u([{key:"buttons",fn:function(){return[t("vxe-button",{on:{click:e.filterNameEvent}},[e._v("筛选 Name")]),t("vxe-button",{on:{click:e.filterAgeEvent}},[e._v("筛选 Age")]),t("vxe-button",{on:{click:e.updateNameFilterEvent}},[e._v("更改 Name 的筛选条件")]),t("vxe-button",{on:{click:function(t){e.$refs.xTable.clearFilter(e.$refs.xTable.getColumnByField("age"))}}},[e._v("清除 Age 的筛选条件")]),t("vxe-button",{on:{click:function(t){return e.$refs.xTable.clearFilter()}}},[e._v("清除所有的筛选条件")]),t("vxe-button",{on:{click:function(t){return e.$refs.xTable.openFilter("age")}}},[e._v("弹出筛选面板")]),t("vxe-button",{on:{click:function(t){return e.$refs.xTable.clearFilter()}}},[e._v("关闭筛选面板")])]},proxy:!0}])}),t("vxe-table",{ref:"xTable",attrs:{border:"",height:"400","row-config":{isHover:!0},loading:e.loading,data:e.tableData}},[t("vxe-column",{attrs:{type:"seq",width:"60"}}),t("vxe-column",{attrs:{field:"name",title:"Name",sortable:"",filters:e.nameOptions,"filter-method":e.filterNameMethod}}),t("vxe-column",{attrs:{field:"role",title:"Role",sortable:"",filters:[{data:""}],"filter-method":e.filterRoleMethod},scopedSlots:e._u([{key:"filter",fn:function(n){var a=n.$panel,l=n.column;return e._l(l.filters,(function(n,l){return t("select",{directives:[{name:"model",rawName:"v-model",value:n.data,expression:"option.data"}],key:l,staticClass:"my-select",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(n,"data",t.target.multiple?a:a[0])},function(e){return a.changeOption(e,!!n.data,n)}]}},e._l(e.roleList,(function(n,a){return t("option",{key:a,domProps:{value:n}},[e._v(e._s(n))])})),0)}))}}])}),t("vxe-column",{attrs:{field:"sex",title:"Sex",sortable:"","filter-multiple":!1,filters:[{label:"Man",value:"1"},{label:"Woman",value:"0"}]}}),t("vxe-column",{attrs:{field:"age",title:"Age",filters:[{data:""}],"filter-method":e.filterAgeMethod,"filter-recover-method":e.filterAgeRecoverMethod},scopedSlots:e._u([{key:"filter",fn:function(n){var a=n.$panel,l=n.column;return[e._l(l.filters,(function(n,l){return[t("input",{directives:[{name:"model",rawName:"v-model",value:n.data,expression:"option.data"}],key:l,staticClass:"my-input",attrs:{type:"type",placeholder:"按回车确认筛选"},domProps:{value:n.data},on:{input:[function(t){t.target.composing||e.$set(n,"data",t.target.value)},function(e){return a.changeOption(e,!!n.data,n)}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.confirmFilter()}}})]}))]}}])}),t("vxe-column",{attrs:{field:"amount",title:"Amount",sortable:""}})],1),t("p",{staticClass:"demo-code"},[e._v(e._s(e.$t("app.body.button.showCode")))]),t("pre",[e._v("    "),t("pre-code",{staticClass:"xml"},[e._v(e._s(e.demoCodes[0]))]),e._v("\n    "),t("pre-code",{staticClass:"javascript"},[e._v(e._s(e.demoCodes[1]))]),e._v("\n    "),t("pre-code",{staticClass:"css"},[e._v(e._s(e.demoCodes[2]))]),e._v("\n  ")],1)],1)},l=[],o=(n(34284),n(79288),n(38478)),r=n.n(o),i={data:function(){return{loading:!1,tableData:[],roleList:["","Develop","PM","Test"],nameOptions:[{label:"包含 6",value:"6"},{label:"包含 4",value:"4"}],demoCodes:['\n        <vxe-toolbar>\n          <template #buttons>\n            <vxe-button @click="filterNameEvent">筛选 Name</vxe-button>\n            <vxe-button @click="filterAgeEvent">筛选 Age</vxe-button>\n            <vxe-button @click="updateNameFilterEvent">更改 Name 的筛选条件</vxe-button>\n            <vxe-button @click="$refs.xTable.clearFilter($refs.xTable.getColumnByField(\'age\'))">清除 Age 的筛选条件</vxe-button>\n            <vxe-button @click="$refs.xTable.clearFilter()">清除所有的筛选条件</vxe-button>\n            <vxe-button @click="$refs.xTable.openFilter(\'age\')">弹出筛选面板</vxe-button>\n            <vxe-button @click="$refs.xTable.clearFilter()">关闭筛选面板</vxe-button>\n          </template>\n        </vxe-toolbar>\n\n        <vxe-table\n          border\n          ref="xTable"\n          height="400"\n          :row-config="{isHover: true}"\n          :loading="loading"\n          :data="tableData">\n          <vxe-column type="seq" width="60"></vxe-column>\n          <vxe-column\n            field="name"\n            title="Name"\n            sortable\n            :filters="[{ label: \'包含 6\', value: \'6\' }, { label: \'包含 4\', value: \'4\' }]"\n            :filter-method="filterNameMethod"></vxe-column>\n          <vxe-column\n            field="role"\n            title="Role"\n            sortable\n            :filters="[{ data: \'\' }]"\n            :filter-method="filterRoleMethod">\n            <template #filter="{ $panel, column }">\n              <select class="my-select" v-model="option.data" v-for="(option, index) in column.filters" :key="index" @change="$panel.changeOption($event, !!option.data, option)">\n                <option v-for="(label, cIndex) in roleList" :key="cIndex" :value="label">{{ label }}</option>\n              </select>\n            </template>\n          </vxe-column>\n          <vxe-column\n            field="sex"\n            title="Sex"\n            sortable\n            :filter-multiple="false"\n            :filters="[{label: \'Man\', value: \'1\'}, {label: \'Woman\', value: \'0\'}]"></vxe-column>\n          <vxe-column field="age" title="Age" :filters="[{ data: \'\' }]" :filter-method="filterAgeMethod" :filter-recover-method="filterAgeRecoverMethod">\n            <template #filter="{ $panel, column }">\n              <template v-for="(option, index) in column.filters">\n                <input class="my-input" type="type" :key="index" v-model="option.data" @input="$panel.changeOption($event, !!option.data, option)" @keyup.enter="$panel.confirmFilter()" placeholder="按回车确认筛选">\n              </template>\n            </template>\n          </vxe-column>\n          <vxe-column field="amount" title="Amount" sortable></vxe-column>\n        </vxe-table>\n        ',"\n        import XEUtils from 'xe-utils'\n        \n        export default {\n          data () {\n            return {\n              loading: false,\n              tableData: [],\n              roleList: ['', 'Develop', 'PM', 'Test']\n            }\n          },\n          created () {\n            this.findList()\n          },\n          methods: {\n            findList () {\n              this.loading = true\n              return new Promise(resolve => {\n                setTimeout(() => {\n                  this.tableData = [\n                    { id: 10001, name: 'Test1', role: 'Develop', sex: '0', age: 28, amount: 888, address: 'test abc' },\n                    { id: 10002, name: 'Test2', role: 'Test', sex: '1', age: 22, amount: 666, address: 'Guangzhou' },\n                    { id: 10003, name: 'Test3', role: 'PM', sex: '1', age: 32, amount: 89, address: 'Shanghai' },\n                    { id: 10004, name: 'Test4', role: 'Designer', sex: '0', age: 23, amount: 1000, address: 'test abc' },\n                    { id: 10005, name: 'Test5', role: 'Develop', sex: '0', age: 30, amount: 999, address: 'Shanghai' },\n                    { id: 10006, name: 'Test6', role: 'Designer', sex: '0', age: 21, amount: 998, address: 'test abc' },\n                    { id: 10007, name: 'Test7', role: 'Test', sex: '1', age: 29, amount: 2000, address: 'test abc' },\n                    { id: 10008, name: 'Test8', role: 'Develop', sex: '1', age: 35, amount: 999, address: 'test abc' }\n                  ]\n                  this.loading = false\n                  resolve()\n                }, 300)\n              })\n            },\n            filterNameMethod ({ value, row, column }) {\n              return XEUtils.toValueString(row.name).toLowerCase().indexOf(value) > -1\n            },\n            filterRoleMethod ({ option, row }) {\n              return row.role === option.data\n            },\n            filterAgeMethod ({ option, row }) {\n              return row.age === Number(option.data)\n            },\n            updateNameFilterEvent () {\n              const xTable = this.$refs.xTable\n              const column = xTable.getColumnByField('name')\n              // 修改筛选列表，并默认设置为选中状态\n              xTable.setFilter(column, [\n                { label: '包含 0', value: '0' },\n                { label: '包含 1', value: '1' },\n                { label: '包含 2', value: '2', checked: true },\n                { label: '包含 3', value: '3' },\n                { label: '包含 4', value: '4' }\n              ])\n              // 修改条件之后，需要手动调用 updateData 处理表格数据\n              xTable.updateData()\n            },\n            filterNameEvent () {\n              const xTable = this.$refs.xTable\n              const column = xTable.getColumnByField('name')\n              // 修改第二个选项为勾选状态\n              const option = column.filters[1]\n              option.checked = true\n              // 修改条件之后，需要手动调用 updateData 处理表格数据\n              xTable.updateData()\n            },\n            filterAgeEvent () {\n              const xTable = this.$refs.xTable\n              const column = xTable.getColumnByField('age')\n              // 修改第一个选项为勾选状态\n              const option = column.filters[0]\n              option.data = '32'\n              option.checked = true\n              // 修改条件之后，需要手动调用 updateData 处理表格数据\n              xTable.updateData()\n            },\n            filterAgeRecoverMethod ({ option }) {\n              // 如果是自定义筛选模板，当为点击确认时，该选项将被恢复为默认值\n              option.data = ''\n            }\n          }\n        }\n        ","\n        .my-select {\n          margin: 10px;\n          width: 100px;\n          height: 32px;\n        }\n        .my-input {\n          margin: 10px;\n          width: 140px;\n          height: 32px;\n        }\n        "]}},created:function(){this.findList()},methods:{findList:function(){var e=this;return this.loading=!0,new Promise((function(t){setTimeout((function(){e.tableData=[{id:10001,name:"Test1",role:"Develop",sex:"0",age:28,amount:888,address:"test abc"},{id:10002,name:"Test2",role:"Test",sex:"1",age:22,amount:666,address:"Guangzhou"},{id:10003,name:"Test3",role:"PM",sex:"1",age:32,amount:89,address:"Shanghai"},{id:10004,name:"Test4",role:"Designer",sex:"0",age:23,amount:1e3,address:"test abc"},{id:10005,name:"Test5",role:"Develop",sex:"0",age:30,amount:999,address:"Shanghai"},{id:10006,name:"Test6",role:"Designer",sex:"0",age:21,amount:998,address:"test abc"},{id:10007,name:"Test7",role:"Test",sex:"1",age:29,amount:2e3,address:"test abc"},{id:10008,name:"Test8",role:"Develop",sex:"1",age:35,amount:999,address:"test abc"}],e.loading=!1,t()}),300)}))},filterNameMethod:function(e){var t=e.value,n=e.row;return r().toValueString(n.name).toLowerCase().indexOf(t)>-1},filterRoleMethod:function(e){var t=e.option,n=e.row;return n.role===t.data},filterAgeMethod:function(e){var t=e.option,n=e.row;return n.age===Number(t.data)},updateNameFilterEvent:function(){this.nameOptions=[{label:"包含 0",value:"0",checked:!1},{label:"包含 1",value:"1",checked:!1},{label:"包含 2",value:"2",checked:!0},{label:"包含 3",value:"3",checked:!1},{label:"包含 4",value:"4",checked:!1}]},filterNameEvent:function(){var e=this.$refs.xTable,t=e.getColumnByField("name"),n=t.filters[1];n.checked=!0,e.updateData()},filterAgeEvent:function(){var e=this.$refs.xTable,t=e.getColumnByField("age"),n=t.filters[0];n.data="32",n.checked=!0,e.updateData()},filterAgeRecoverMethod:function(e){var t=e.option;t.data=""}}},s=i,u=n(1001),d=(0,u.Z)(s,a,l,!1,null,"46292eba",null),c=d.exports}}]);