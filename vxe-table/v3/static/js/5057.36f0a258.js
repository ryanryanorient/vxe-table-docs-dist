"use strict";(self["webpackChunkvxe_table_v3"]=self["webpackChunkvxe_table_v3"]||[]).push([[5057],{55057:function(e,n,t){t.r(n),t.d(n,{default:function(){return f}});t(34284);var a=function(){var e=this,n=e._self._c;return n("div",[n("p",{staticClass:"tip"},[e._v("实现附件上传，使用展开行和 "),n("table-api-link",{attrs:{prop:"readFile"}}),e._v(" 本地文件读取函数"),n("span",{staticClass:"red"},[e._v("（具体请自行实现，该示例仅供参考）")])],1),n("vxe-grid",{ref:"xGrid",attrs:{border:"",resizable:"","max-height":"500",columns:e.tableColumn,data:e.tableData},scopedSlots:e._u([{key:"fileExpand",fn:function(t){var a=t.row;return[a.fileList.length?n("ul",{staticClass:"file-list"},e._l(a.fileList,(function(t,a){return n("li",{key:a},[n("span",[e._v(e._s(t.name))]),n("span",[e._v(e._s(t.size))]),n("span",[e._v(e._s(t.type))]),n("span",[e._v(e._s(t.date))])])})),0):n("div",{staticClass:"file-empty"},[e._v("暂无附件")])]}},{key:"cellExpand",fn:function(t){var a=t.row;return[n("span",[e._v("（"+e._s(a.fileList.length)+"）")])]}},{key:"operation",fn:function(t){var a=t.row;return[n("vxe-button",{attrs:{status:"primary"},on:{click:function(n){return e.uploadFileEvent(a)}}},[e._v("添加附件")])]}}])}),n("p",{staticClass:"demo-code"},[e._v(e._s(e.$t("app.body.button.showCode")))]),n("pre",[e._v("    "),n("pre-code",{staticClass:"xml"},[e._v(e._s(e.demoCodes[0]))]),e._v("\n    "),n("pre-code",{staticClass:"javascript"},[e._v(e._s(e.demoCodes[1]))]),e._v("\n    "),n("pre-code",{staticClass:"css"},[e._v(e._s(e.demoCodes[2]))]),e._v("\n  ")],1)],1)},l=[],s=(t(60228),t(47522),t(77049),t(21694),t(6203),t(89730),t(70560),t(38478)),i=t.n(s),o={data:function(){return{tableColumn:[{type:"seq",width:50},{type:"expand",width:120,slots:{content:"fileExpand",default:"cellExpand"}},{field:"name",title:"app.body.label.name"},{field:"sex",title:"app.body.label.sex"},{title:"操作",width:160,showOverflow:!0,slots:{default:"operation"}}],tableData:[{name:"name1",sex:"男",age:"26",fileList:[]},{name:"name2",sex:"女",age:"28",fileList:[]},{name:"name3",sex:"男",age:"30",fileList:[]}],demoCodes:['\n        <vxe-grid\n          border\n          resizable\n          ref="xGrid"\n          max-height="500"\n          :columns="tableColumn"\n          :data="tableData">\n          \x3c!--使用自定义模板--\x3e\n          <template #fileExpand="{ row }">\n            <ul v-if="row.fileList.length" class="file-list">\n              <li v-for="(file, index) in row.fileList" :key="index">\n                <span>{{ file.name }}</span>\n                <span>{{ file.size }}</span>\n                <span>{{ file.type }}</span>\n                <span>{{ file.date }}</span>\n              </li>\n            </ul>\n            <div v-else class="file-empty">暂无附件</div>\n          </template>\n          <template #cellExpand="{ row }">\n            <span>（{{ row.fileList.length }}）</span>\n          </template>\n          <template #operation="{ row }">\n            <vxe-button status="primary" @click="uploadFileEvent(row)">添加附件</vxe-button>\n          </template>\n        </vxe-grid>\n        ',"\n        import XEUtils from 'xe-utils'\n        \n        export default {\n          data () {\n            return {\n              tableColumn: [\n                { type: 'seq', width: 50 },\n                { type: 'expand', width: 120, slots: { content: 'fileExpand', default: 'cellExpand' } },\n                { field: 'name', title: 'app.body.label.name' },\n                { field: 'sex', title: 'app.body.label.sex' },\n                { title: '操作', width: 160, showOverflow: true, slots: { default: 'operation' } }\n              ],\n              tableData: [\n                { name: 'name1', sex: '男', age: '26', fileList: [] },\n                { name: 'name2', sex: '女', age: '28', fileList: [] },\n                { name: 'name3', sex: '男', age: '30', fileList: [] }\n              ]\n            }\n          },\n          methods: {\n            // 读取附件\n            uploadFileEvent (row) {\n              const $grid = this.$refs.xGrid\n              // 读取附件\n              $grid.readFile({\n                multiple: true,\n                types: ['xlsx', 'csv', 'html']\n              }).then(params => {\n                const { files } = params\n                // 解析数据并显示\n                Array.from(files).forEach(file => {\n                  const ns = file.name.split('.')\n                  const name = ns.slice(0, ns.length - 1).join('')\n                  const type = ns[ns.length - 1]\n                  const record = {\n                    name: name,\n                    size: file.size,\n                    type: type,\n                    date: XEUtils.toDateString(new Date())\n                  }\n                  row.fileList.push(record)\n                })\n                // 加载完成后展开行\n                $grid.setRowExpand(row, true)\n              })\n            }\n          }\n        }\n        ","\n        .file-list li span{\n          display: inline-block;\n          width: 25%;\n        }\n        .file-empty {\n          text-align: center;\n        }\n        "]}},methods:{uploadFileEvent:function(e){var n=this.$refs.xGrid;n.readFile({multiple:!0,types:["xlsx","csv","html"]}).then((function(t){var a=t.files;Array.from(a).forEach((function(n){var t=n.name.split("."),a=t.slice(0,t.length-1).join(""),l=t[t.length-1],s={name:a,size:n.size,type:l,date:i().toDateString(new Date)};e.fileList.push(s)})),n.setRowExpand(e,!0)}))}}},r=o,p=t(1001),d=(0,p.Z)(r,a,l,!1,null,"a4f80c98",null),f=d.exports},6203:function(e,n,t){var a=t(79989),l=t(68844),s=t(94413),i=t(65290),o=t(16834),r=l([].join),p=s!==Object,d=p||!o("join",",");a({target:"Array",proto:!0,forced:d},{join:function(e){return r(i(this),void 0===e?",":e)}})}}]);