"use strict";(self["webpackChunkvxe_table_v3"]=self["webpackChunkvxe_table_v3"]||[]).push([[5899],{15899:function(e,n,a){a.r(n),a.d(n,{default:function(){return o}});var d=function(){var e=this,n=e._self._c;return n("div",[n("p",{staticClass:"tip"},[e._v(" 树表格的懒加载和右键菜单，通过调用 "),n("table-api-link",{attrs:{prop:"clearTreeExpandLoaded"}}),e._v(" 方法清除加载完成状态，通过调用 "),n("table-api-link",{attrs:{prop:"reloadTreeExpand"}}),e._v(" 方法重新加载子节点 ")],1),n("vxe-table",{ref:"xTree",attrs:{border:"",resizable:"","row-id":"id","menu-config":{body:{options:e.bodyMenus},visibleMethod:e.visibleMethod},"tree-config":{transform:!0,lazy:!0,hasChild:"hasChild",loadMethod:e.loadChildrenMethod},data:e.tableData},on:{"menu-click":e.contextMenuClickEvent}},[n("vxe-column",{attrs:{field:"name",title:"Name",width:"400","tree-node":""}}),n("vxe-column",{attrs:{field:"size",title:"Size"}}),n("vxe-column",{attrs:{field:"type",title:"Type"}}),n("vxe-column",{attrs:{field:"date",title:"Date"}})],1),n("p",{staticClass:"demo-code"},[e._v(e._s(e.$t("app.body.button.showCode")))]),n("pre",[e._v("    "),n("pre-code",{staticClass:"xml"},[e._v(e._s(e.demoCodes[0]))]),e._v("\n    "),n("pre-code",{staticClass:"javascript"},[e._v(e._s(e.demoCodes[1]))]),e._v("\n  ")],1)],1)},t=[],l=(a(60228),a(34284),a(47522),a(76801),{data:function(){return{tableData:[{id:1e4,parentId:null,name:"test abc1",type:"mp3",size:1024,date:"2020-08-01"},{id:10050,parentId:null,name:"Test2",type:"mp4",size:null,date:"2021-04-01",hasChild:!0},{id:23666,parentId:null,name:"Test23",type:"mp4",size:null,date:"2021-01-02",hasChild:!0},{id:24555,parentId:null,name:"test abc9",type:"avi",size:224,date:"2020-10-01"}],bodyMenus:[[{code:"clearLoaded",name:"清除加载状态",disabled:!1},{code:"reloadNodes",name:"重新加载子节点",disabled:!1},{code:"expand",name:"展开节点",disabled:!1},{code:"contract",name:"收起节点",disabled:!1}]],demoCodes:['\n        <vxe-table\n          border\n          resizable\n          ref="xTree"\n          row-id="id"\n          :menu-config="{body: {options: bodyMenus}, visibleMethod}"\n          :tree-config="{transform: true, lazy: true, hasChild: \'hasChild\', loadMethod: loadChildrenMethod}"\n          :data="tableData"\n          @menu-click="contextMenuClickEvent">\n          <vxe-column field="name" title="Name" width="400" tree-node></vxe-column>\n          <vxe-column field="size" title="Size"></vxe-column>\n          <vxe-column field="type" title="Type"></vxe-column>\n          <vxe-column field="date" title="Date"></vxe-column>\n        </vxe-table>\n        ',"\n        export default {\n          data () {\n            return {\n              tableData: [\n                { id: 10000, parentId: null, name: 'test abc1', type: 'mp3', size: 1024, date: '2020-08-01' },\n                { id: 10050, parentId: null, name: 'Test2', type: 'mp4', size: null, date: '2021-04-01', hasChild: true },\n                { id: 23666, parentId: null, name: 'Test23', type: 'mp4', size: null, date: '2021-01-02', hasChild: true },\n                { id: 24555, parentId: null, name: 'test abc9', type: 'avi', size: 224, date: '2020-10-01' }\n              ],\n              bodyMenus: [\n                [\n                  { code: 'clearLoaded', name: '清除加载状态', disabled: false },\n                  { code: 'reloadNodes', name: '重新加载子节点', disabled: false },\n                  { code: 'expand', name: '展开节点', disabled: false },\n                  { code: 'contract', name: '收起节点', disabled: false }\n                ]\n              ]\n            }\n          },\n          methods: {\n            loadChildrenMethod ({ row }) {\n              // 异步加载子节点\n              return new Promise(resolve => {\n                setTimeout(() => {\n                  const childs = [\n                    { id: row.id + 100000, parentId: row.id, name: row.name + 'Test45', type: 'mp4', size: null, date: '2021-10-03', hasChild: true },\n                    { id: row.id + 150000, parentId: row.id, name: row.name + 'Test56', type: 'mp3', size: null, date: '2021-07-09', hasChild: false }\n                  ]\n                  resolve(childs)\n                }, 500)\n              })\n            },\n            visibleMethod  ({ row, type }) {\n              let xTree = this.$refs.xTree\n              if (type === 'body') {\n                this.bodyMenus.forEach(list => {\n                  list.forEach(item => {\n                    if (['clearLoaded', 'reloadNodes'].includes(item.code)) {\n                      item.disabled = !row.hasChild || !xTree.isTreeExpandLoaded(row)\n                    } else if (['expand', 'contract'].includes(item.code)) {\n                      if (row.hasChild) {\n                        let isExpand = xTree.isTreeExpandByRow(row)\n                        item.disabled = ['expand'].includes(item.code) ? isExpand : !isExpand\n                      } else {\n                        item.disabled = true\n                      }\n                    }\n                  })\n                })\n              }\n              return true\n            },\n            contextMenuClickEvent ({ menu, row, column }) {\n              let xTree = this.$refs.xTree\n              switch (menu.code) {\n                case 'clearLoaded':\n                  xTree.clearTreeExpandLoaded(row)\n                  break\n                case 'reloadNodes':\n                  xTree.reloadTreeExpand(row)\n                  break\n                case 'expand':\n                  xTree.setTreeExpand(row, true)\n                  break\n                case 'contract':\n                  xTree.setTreeExpand(row, false)\n                  break\n              }\n            }\n          }\n        }\n        "]}},methods:{loadChildrenMethod:function(e){var n=e.row;return new Promise((function(e){setTimeout((function(){var a=[{id:n.id+1e5,parentId:n.id,name:n.name+"Test45",type:"mp4",size:null,date:"2021-10-03",hasChild:!0},{id:n.id+15e4,parentId:n.id,name:n.name+"Test56",type:"mp3",size:null,date:"2021-07-09",hasChild:!1}];e(a)}),500)}))},visibleMethod:function(e){var n=e.row,a=e.type,d=this.$refs.xTree;return"body"===a&&this.bodyMenus.forEach((function(e){e.forEach((function(e){if(["clearLoaded","reloadNodes"].includes(e.code))e.disabled=!n.hasChild||!d.isTreeExpandLoaded(n);else if(["expand","contract"].includes(e.code))if(n.hasChild){var a=d.isTreeExpandByRow(n);e.disabled=["expand"].includes(e.code)?a:!a}else e.disabled=!0}))})),!0},contextMenuClickEvent:function(e){var n=e.menu,a=e.row,d=this.$refs.xTree;switch(n.code){case"clearLoaded":d.clearTreeExpandLoaded(a);break;case"reloadNodes":d.reloadTreeExpand(a);break;case"expand":d.setTreeExpand(a,!0);break;case"contract":d.setTreeExpand(a,!1);break}}}}),i=l,r=a(1001),s=(0,r.Z)(i,d,t,!1,null,null,null),o=s.exports}}]);